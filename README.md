## 什么是 Void

区块链技术的高速发展，催生了许多新的应用场景，新的网络形态，安全模型，激励机制和代币经济体系为未来的互联网激活了无数的可能性。去中心应用（Decentralized Apps，DApps）蓬勃发展的同时，由于当前比特币和以太坊区块链的设计上的局限，面临网络总吞吐量小，交易确认时间长，数据存储成本高昂，交易手续费居高不下且波动较大等瓶颈，制约了许多应用的落地，亟待新的扩容方案。

Void 是一个高性能，高度可扩展的分布式数据流网络，也是一个轻量级的区块链侧链网络。Void 使用类似区块链的数据结构，每个用户或每个应用都是一条独立的链，即时发布消息，不需要等待矿工确认和负担矿工费。由于每一条链各自独立，不需要像比特币的区块链那样打包交易，所以 Void 以消息为链的基本单元，而不是区块，作为一个可验证数据结构（Authenticated Data Structure）和只增日志结构（append-only log），数据在网络中广播（gossiping），并以一定的规则分布，形成高效的去中心自治网络。

Void 具有很好的可扩展性，可以承载不同的数据内容，不同类型的应用在消息体中扩展自己的消息类型（application specific message），网络提供了可验证数据结构和分发机制，在此基础上可以灵活的软分叉，随着新的应用出现，扩展新的能力。每一条链也可以分成不同的命名空间，用于不同的应用，分配不同的内容发布权限。

## Void 的数据分布与共识

造成当前以太坊等区块链性能瓶颈的其中一个原因，就是每个节点都要存储全量的数据，具备完全的处理能力。而 Void 是一个侧链的设计，每个节点只会存储相关的若干子链的数据，链与链之间互相 follow，形成类似 twitter 的网络，只有节点 follow 的链才会被缓存。follow 关系意味着关注和缓存对方链的数据，一种弱信任关系。follow 关系也是链上消息的一部分，通过读取链的 follow/unfollow 消息，其他节点可以知道这个节点存储哪些子链，优化数据的分布，加速网络同步过程。

网络中有一些帮助缓存和分发数据的中继节点，称为 hub。这些 hub 通过一定准入机制，自动 follow 一些子链，志愿提供服务，或者是通过服务合约，在一定的激励下提供可靠的服务。对于应用方，也可以设置特定应用的 hub，让用户可以不需要付费而得到基本的服务，降低网络进入门槛。

Void 本身不依赖 PoW 或 PoS 等算法提供共识机制，而是通过与以太坊等支持智能合约的区块链主链交互，进行数据一致性的见证。Void 的可验证数据结构使用了 streaming merkle tree，每一个消息的 hash 和数字签名都包含了这个链的所有历史状态，将当前消息的 hash 和 signature 写入合约，保证子链有唯一的版本。子链之下可以衍生下级子链，将 hash 写入父链进行见证，或者由多条侧链进行见证。Void 的见证机制和侧链交互机制可以锚定到多条主链上，与 Ethereum，EOS ，Polkadot 或是新的区块链平台交互，与整个区块链生态的发展同步。

## Void 的灵活性和应用友好性

对于许多区块链应用来说，以太坊等基于复制状态机的区块链，为了获得当前和历史上的区块链状态，需要侦听合约状态变化和枚举事件，很难与应用本身所需的数据结构匹配。Void 不仅可以为应用提供定制的消息类型，还可以根据应用需求进行查询索引和建立物化视图（Materialized View），使用 GraphQL 进行查询，生成与应用结构相匹配的数据，增强应用场景，简化 Dapp 的开发和集成难度。

简化的，基于消息的数据结构使得 Void 不需要大量的计算就能构造新的消息，保证了单节点的吞吐能力；每个应用，每个用户都能开设新的侧链，只需要链间异步的见证，使得整个侧链网络能够高度并行，这都增强了网络的吞吐性能。DApp 服务方也可以建立自己的节点，免费为用户存储/分发/见证数据，降低使用门槛，通过服务和内容盈利。这些设计都有助于构建一个高效的数据流网络，支撑通讯，媒体，社交，游戏等应用。

Void 作为一个通用的数据结构和与区块链交互的 p2p 网络，可以与不同的主链集成，为不同生态下的 DApp 提供支持。Void 致力于成为一个去中心互联网下的通用的应用层协议。

## Void Plasma

Void 本身提供了一个数据流机制和可验证数据结构，为了承载交易，扩充区块链的交易吞吐量，同时保证资金的安全性和交易的可验证性，我们引入了 Vitalik Buterin 和 Joseph Poon 提出的 Plasma 侧链模型，提供安全，高效，可验证的 UTXO 交易机制。

Void 使用 streaming merkle tree 的结构，任何一条消息都包含链的 merkel tree 的 hash，即每一条消息都包含整条链的所有历史状态的见证，同时每条消息都有一个严格顺序递增的序列号。维护 Plasma 链并把历史证明提交到主链的节点，称为 operator。对于想作为 operator 见证和打包交易的节点，需要在主链的 Void Plasma 合约上预存一部分押金，预存的押金越高，违约成本越高，约容易吸引更多的用户在这个侧链上进行交易，从而收取交易费，获得更高的收入。

以以太坊为例，想进行高频次，低成本，小额交易的用户，可以在主链上把以太币存入 Void Plasma 合约对应这个 operator 的地址， operator 相应赋予这个用户在侧链上的账户余额，用户使用 UTXO 的方式进行交易，将生成的 UTXO 交给 operator 发布在侧链上，每隔一定的时间间隔， operator 把侧链的 merkle root hash 和签名写入主链的合约，使侧链的状态得到主链的见证。任何时候，用户的余额可以在主链上退出，把剩余的 UTXO 和相应的 merkle tree proof 提交到主链，不需要经过侧链 operator 的确认，资金就可以安全退出。 operator 只是负责把交易写入侧链以及定期把少量历史证明写入主链，无法伪造交易本身，即时 operator 作恶或者不再提供服务，用户依然能在主链退出，保证资金安全。

由于 Void 的数据结构与 git 相近，这里以 git 为例说明 Plasma 的运作过程：

 * 每个 operator 维护一个 git 仓库，可以在本地保存大量数据
 * 用户以 UTXO 的形式进行小额交易，把 UTXO 交给 operator ，写入这个 git repo，类似 git commit 机制
 * operator 定期把 git repo 的 head hash 写入主链的合约进行数据见证
 * 用户需要从侧链转出余额，提交 UTXO 的证明，指出这一笔交易在某一个 commit 出现过，同时证明这个 commit 包含当前写入的 head hash 的状态，证明这个 UTXO 是当前状态的一部分
 * 为了避免有新的交易花掉这笔 UTXO，其他发现该用户作弊的人可以提交新的 UTXO 证明这一笔金额已经被花掉，同时获得举报的奖励金，需要等待一段时间，期间 UTXO 将被冻结
 * 过了挑战期，用户提交的 UTXO 没有有效的挑战，可以取走这笔交易的余额

通过 Plasma 的机制，赋予了 Void 保障资金安全并快速交易的能力，扩展了以太坊等主链的交易吞吐量，能交易以太币等原生代币，ERC20 Token，ERC721 Token等各种数字资产。这个机制也可以扩展到 EOS 或其他新的区块链主链上。这也赋予了 Void 独立的代币经济体系。Void 本身 streaming merkle tree 的数据结构，天然的适合 Plasma 的机制，简化了实现成本。

## Void 的应用场景

### 论坛，社交网络，hackernews

 * 每个用户都是一条子链
 * 每个账户都可以发送消息，互相关注，评论和互动，所有这些行为都是子链上的事件
 * 朋友的朋友通常也是朋友，子链之间具有逻辑的近邻性，利用数据的聚集性可以高效的同步
 * 消息成本很低，可以自愿缓存数据
 * 当用户存在滥用时，unfollow 这个子链，具有一定的内容控制能力

### 数据同步与文件分发，npm，软件分发

 * 作为 authenticated feed 发布新版本的软件和文件资源
 * 数据可验证，并且通过 message relay 提供权威性证明
 * 稀疏的，增量的，实时的动态文件集更新

### 游戏

 * 通过子链承载游戏的消息，部分消息可以提交到主链上见证
 * 游戏平台提供一定的消息分发，缓存服务
 * 适合棋类，扑克牌等回合制游戏，每一步的交互作为一条消息
 * 最后胜负提交到主链上，触发合约行为

## Void 的进化

### multi-consensus

Void 本身提供了一个轻量的侧链机制，依赖区块链主链提供共识，通过智能合约进行数据验证。随着区块链技术的进化，新的公链和联盟链平台，新的 PoW，PoS，BFT，DAG 等技术也会不断涌现，Void 能够与这些新的链，新的共识算法交互，提供一个粘合剂。各种共识算法都能在特定的应用场景下为 Void 提供数据的见证和互操作机制，让网络持续进化。

### multi-master

Void 一条侧链不光可以锚定到一条主链上，也可以锚定到多条主链，为多个网络服务，提供轻量的跨链机制，提供诸如跨链结算，代币互换等功能。多个主链也为 Void 侧链提供了更强的安全性，不同链之间的出块时间，交易成本，网络稳定性各不相同，多主链的 multi-master 架构可以提供更丰富的见证机制，避免主链的技术特性成为 Void 的瓶颈。

### multi-world

未来的区块链生态一定会更加丰富，形成计算/存储/通讯的三位一体的开放网络，Void 提供一个通用的数据流网络，可以承载数据存储，消息通讯，侧链交易等信息，为不同的 DApp 提供特定应用的数据类型，适配不同的应用场景，补充不同主链在应用层的可扩展性。这些子链独立的运作，高度并行，性能随着网络节点的增加水平扩展。

### interlinkable chain

作为互联网基础的 World Wide Web 的核心是超链接 hyperlinks，超链接将互联网上分散的资源和实体连接起来。而 Void 定义了一个轻量的链式结构，以及链间的互操作机制，同样是要构建一个无限互联的分布式网络图景。链与链之间互相引用，见证，复制，衍生。


## Void 的哲学

Void 起源于对 git 分布式文件版本控制系统和 Couchdb 分布式最终一致数据库的探索。我们希望在区块链时代构造像 git 一样去中心，可验证，异步提交，灵活，高性能的机制，并且通过 merkle tree 的加密学证明，任何时刻 git 仓库的 head hash 都蕴含了对整个文件系统历史的见证。Couchdb 数据库则提供了一个基于 append-only log 的数据库机制，不同节点并行可入，系统性能水平扩展，在这个核心的 log 上面可以进行不同的查询，建立特定应用的视图。Couchdb 的 schemaless 设计也影响了 Void，我们提供一个统一的基础数据格式，但消息本身的内容只与应用相关，可以灵活的软分叉，不断为网络扩充新的能力。

Void 的设计也受到了 Dat 项目的影响，Dat 扩充了 git 的应用场景到结构化的数据，完善了加密学数字签名机制，并且引入了 ppspp 协议的 merkle-tree stream。Void 的数据分发和 follow 机制受到了 secure scuttlebutt 的影响，展现了一个在分布式网络中定向的，高效的分发数据的机制，能够在激励不充分的时候启动网络。Void 的数据同步协议来自于 Amazon DynamoDB 和 Riak 数据库的 Flow Gossip，以及 Epidemic Broadcast Tree 算法，能够利用向量钟高效同步数据，降低网络通讯成本，缩短 swarm 到达同步的时间。Vitalik 等提出的 Plasma 为 Void 的区块链可互操作性提供了一个很好的框架。

目前主流的区块链共识算法形态更像是强一致性数据库系统，要求在有限的时间内，已知的矿工中间达到一致的共识，并取得全网的认可。而 Void 保留了不可变的链式结构，但设计上强调异步性，并行性，灵活性，可扩展性，构建了一个更加低成本，更具包容性的网络，接近于一个最终一致数据库的模型，也从这样一个几十年研究历史的领域中得到了许多启迪。我们相信不同的哲学，不同的设计，不同的取舍，可以互相补充，构建更丰富的生态。如果有什么是 Void 真正的哲学理念，那就是灵活，简单，快！







